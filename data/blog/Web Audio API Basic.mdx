---
title: 'Web Audio API ê¸°ì´ˆ ì™„ë²½ ê°€ì´ë“œ'
date: '2025-09-06'
tags: ['Web Audio API', 'JavaScript', 'DSP', 'AudioContext', 'AudioNode', 'BiquadFilter']
draft: false
summary: 'ì´ˆë³´ìë¥¼ ìœ„í•œ Web Audio API ìƒì„¸ ê°€ì´ë“œ: AudioContext, AudioNode, connect(), BiquadFilterNodeë¥¼ ì‹¤ì œ ì˜ˆì œì™€ í•¨ê»˜ ì™„ì „ ì •ë³µí•´ë³´ì„¸ìš”.'
---

import Image from 'next/image'

# Web Audio API ê¸°ì´ˆ ì™„ë²½ ê°€ì´ë“œ

## ëª©ì°¨

1. [Web Audio APIë€?](#web-audio-apië€)
2. [AudioContext ê°œë…](#audiocontext-ê°œë…)
3. [AudioNode ê°œë…](#audionode-ê°œë…)
4. [connect() ë©”ì†Œë“œë¡œ ë…¸ë“œ ì—°ê²°í•˜ê¸°](#connect-ë©”ì†Œë“œë¡œ-ë…¸ë“œ-ì—°ê²°í•˜ê¸°)
5. [BiquadFilterNode ì‚¬ìš©ë²•](#biquadfilternode-ì‚¬ìš©ë²•)
6. [ì‹¤ì „ ì˜ˆì œ](#ì‹¤ì „-ì˜ˆì œ)
7. [ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜ë“¤](#ìì£¼-í•˜ëŠ”-ì‹¤ìˆ˜ë“¤)

---

## Web Audio APIë€?

**Web Audio API**ëŠ” ì›¹ì—ì„œ ì˜¤ë””ì˜¤ë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ ê°•ë ¥í•œ JavaScript APIì…ë‹ˆë‹¤. ë§ˆì¹˜ ì „ììŒì•… ìŠ¤íŠœë””ì˜¤ì˜ ì¥ë¹„ë“¤ì„ ì½”ë“œë¡œ ì¡°ì‘í•˜ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤.

### ğŸ›ï¸ ì‹¤ì œ ìŠ¤íŠœë””ì˜¤ì™€ ë¹„êµ

```
ì‹¤ì œ ìŠ¤íŠœë””ì˜¤:     [ì‹ ë””ì‚¬ì´ì €] â†’ [ì´í™í„°] â†’ [ë¯¹ì„œ] â†’ [ìŠ¤í”¼ì»¤]
Web Audio API:    [AudioNode] â†’ [AudioNode] â†’ [AudioNode] â†’ [destination]
```

### íŠ¹ì§•

- **ì‹¤ì‹œê°„ ì˜¤ë””ì˜¤ ì²˜ë¦¬**: ì§€ì—° ì—†ì´ ì¦‰ì‹œ ì†Œë¦¬ ì¡°ì‘
- **ëª¨ë“ˆëŸ¬ ì‹œìŠ¤í…œ**: ë ˆê³  ë¸”ë¡ì²˜ëŸ¼ ì¡°ë¦½ ê°€ëŠ¥
- **ê³ ì„±ëŠ¥**: ë„¤ì´í‹°ë¸Œ ì•± ìˆ˜ì¤€ì˜ ì„±ëŠ¥
- **í¬ë¡œìŠ¤ í”Œë«í¼**: ëª¨ë“  ëª¨ë˜ ë¸Œë¼ìš°ì €ì—ì„œ ë™ì‘

> **ì£¼ì˜**: Web Audio APIëŠ” HTTPS í™˜ê²½ì—ì„œë§Œ ì™„ì „íˆ ì‘ë™í•©ë‹ˆë‹¤. ë¡œì»¬ ê°œë°œ ì‹œì—ëŠ” `localhost`ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

---

## AudioContext ê°œë…

**AudioContext**ëŠ” Web Audio APIì˜ **ì¤‘ì•™ ê´€ì œì‹¤**ì…ë‹ˆë‹¤. ëª¨ë“  ì˜¤ë””ì˜¤ ì²˜ë¦¬ì˜ ì‹œì‘ì ì´ì ê´€ë¦¬ì ì—­í• ì„ í•©ë‹ˆë‹¤.

### ğŸ­ ê³µì¥ì— ë¹„ìœ í•˜ë©´

```
AudioContext = ê³µì¥ ê´€ë¦¬ì
- ì „ì²´ ìƒì‚° ë¼ì¸ ê´€ë¦¬
- í’ˆì§ˆ ê´€ë¦¬ (ìƒ˜í”Œ ë ˆì´íŠ¸)
- ì‹œê°„ ê´€ë¦¬ (currentTime)
- ìì› ê´€ë¦¬ (ë©”ëª¨ë¦¬, CPU)
```

### ê¸°ë³¸ ìƒì„±ë²•

```javascript
// AudioContext ìƒì„± (ê°€ì¥ ê¸°ë³¸)
const audioContext = new AudioContext()

// ë˜ëŠ” ë¸Œë¼ìš°ì € í˜¸í™˜ì„±ì„ ìœ„í•´
const audioContext = new (window.AudioContext || window.webkitAudioContext)()

// ì™„ì „í•œ ì—ëŸ¬ ì²˜ë¦¬ì™€ í•¨ê»˜
async function createAudioContext() {
  try {
    const audioContext = new (window.AudioContext || window.webkitAudioContext)()

    // ë¸Œë¼ìš°ì € ì •ì±…ìœ¼ë¡œ ì¸í•œ ì¼ì‹œì •ì§€ ìƒíƒœ ì²´í¬
    if (audioContext.state === 'suspended') {
      await audioContext.resume()
    }

    return audioContext
  } catch (error) {
    console.error('AudioContext ìƒì„± ì‹¤íŒ¨:', error)
    throw new Error('ì˜¤ë””ì˜¤ ì´ˆê¸°í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')
  }
}
```

## (ì¶”ê°€ ê°œë…) ìƒ˜í”Œë ˆì´íŠ¸(Sample Rate)

**ìƒ˜í”Œë ˆì´íŠ¸**ëŠ” ì†Œë¦¬ë¥¼ ë””ì§€í„¸ë¡œ í‘œí˜„í•  ë•Œ, **1ì´ˆ ë™ì•ˆ ì†Œë¦¬ë¥¼ ëª‡ ë²ˆ ë‚˜ëˆ„ì–´ ê¸°ë¡í•˜ëŠ”ê°€**ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.  
ì¦‰, ì˜¤ë””ì˜¤ì˜ í•´ìƒë„ ê°™ì€ ê°œë…ì´ì—ìš”.

- ë‹¨ìœ„: **Hz(í—¤ë¥´ì¸ )**
- ì˜ˆ: `44100 Hz` â†’ 1ì´ˆì— **44,100ë²ˆ** ìƒ˜í”Œë§

---

### ğŸ“· ì‚¬ì§„ì— ë¹„ìœ í•˜ë©´

- **ì†Œë¦¬ = ì˜í™” ì† ì—°ì†ì ì¸ ì¥ë©´**
- **ìƒ˜í”Œë ˆì´íŠ¸ = ì´ˆë‹¹ ëª‡ ì¥ì„ ì°ëŠ”ê°€(FPSì™€ ìœ ì‚¬)**

ğŸ‘‰ FPSê°€ ë†’ì„ìˆ˜ë¡ ë¶€ë“œëŸ½ê²Œ ë³´ì´ë“¯, ìƒ˜í”Œë ˆì´íŠ¸ê°€ ë†’ì„ìˆ˜ë¡ ì›ë˜ ì†Œë¦¬ì— ë” ê°€ê¹ê²Œ ë“¤ë¦½ë‹ˆë‹¤.

---

### ğŸ¶ ëŒ€í‘œì ì¸ ìƒ˜í”Œë ˆì´íŠ¸ ê°’

| ìƒ˜í”Œë ˆì´íŠ¸      | ìš©ë„ / ì˜ˆì‹œ                 |
| --------------- | --------------------------- |
| **8 kHz**       | ì „í™” ìŒì„± (ìŒì§ˆ ë‚®ìŒ)       |
| **22.05 kHz**   | ì˜¤ë˜ëœ MP3, ì¸í„°ë„· ìŠ¤íŠ¸ë¦¬ë° |
| **44.1 kHz**    | CD ìŒì§ˆ (í‘œì¤€ ìŒì•… ìŒì§ˆ)    |
| **48 kHz**      | ì˜í™”, ì˜ìƒ, DAW ê¸°ë³¸        |
| **96 kHz ì´ìƒ** | ìŠ¤íŠœë””ì˜¤ ë…¹ìŒ, ê³ ìŒì§ˆ ìŒì›  |

### ì£¼ìš” ì†ì„±ë“¤

```javascript
// ìƒ˜í”Œ ë ˆì´íŠ¸ (ì´ˆë‹¹ ìƒ˜í”Œ ìˆ˜)
console.log(audioContext.sampleRate) // ë³´í†µ 44100 ë˜ëŠ” 48000

// í˜„ì¬ ì‹œê°„ (ì´ˆ ë‹¨ìœ„, ë§¤ìš° ì •í™•)
console.log(audioContext.currentTime) // ì˜ˆ: 1.23456789

// ì˜¤ë””ì˜¤ ì»¨í…ìŠ¤íŠ¸ ìƒíƒœ
console.log(audioContext.state) // 'running', 'suspended', 'closed'

// ìµœì¢… ì¶œë ¥ (ìŠ¤í”¼ì»¤)
console.log(audioContext.destination) // í•­ìƒ ì¡´ì¬í•˜ëŠ” íŠ¹ë³„í•œ ë…¸ë“œ
```

### AudioContext ìƒëª…ì£¼ê¸°

```javascript
// 1. ìƒì„±
const ctx = new AudioContext()

// 2. ì‚¬ìš©
// ... ì˜¤ë””ì˜¤ ì²˜ë¦¬ ì‘ì—…ë“¤ ...

// 3. ì¼ì‹œì •ì§€ (ë©”ëª¨ë¦¬ëŠ” ìœ ì§€)
await ctx.suspend()

// 4. ì¬ê°œ
await ctx.resume()

// 5. ì™„ì „ ì¢…ë£Œ (ë©”ëª¨ë¦¬ í•´ì œ)
await ctx.close()
```

### âš ï¸ ì¤‘ìš”í•œ ë¸Œë¼ìš°ì € ì •ì±…

í˜„ëŒ€ ë¸Œë¼ìš°ì €ëŠ” ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ì—†ì´ëŠ” ì˜¤ë””ì˜¤ ì¬ìƒì„ ì°¨ë‹¨í•©ë‹ˆë‹¤.

```javascript
// âŒ ì˜ëª»ëœ ë°©ë²• (í˜ì´ì§€ ë¡œë“œ ì‹œ ì¦‰ì‹œ ì‹¤í–‰)
window.addEventListener('load', () => {
  const ctx = new AudioContext()
  // ë¸Œë¼ìš°ì €ê°€ suspended ìƒíƒœë¡œ ë§Œë“¤ì–´ë²„ë¦¼!
})

// âœ… ì˜¬ë°”ë¥¸ ë°©ë²• (ì‚¬ìš©ì ìƒí˜¸ì‘ìš© í›„)
button.addEventListener('click', async () => {
  const ctx = new AudioContext()

  // ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ suspended ìƒíƒœë¡œ ë§Œë“¤ ìˆ˜ ìˆìŒ
  if (ctx.state === 'suspended') {
    await ctx.resume() // ë°˜ë“œì‹œ ì¬ê°œ í•„ìš”
  }

  // ì´ì œ ì˜¤ë””ì˜¤ ì²˜ë¦¬ ê°€ëŠ¥
})
```

---

## AudioNode ê°œë…

**AudioNode**ëŠ” ì˜¤ë””ì˜¤ ì²˜ë¦¬ì˜ **ê¸°ë³¸ ë‹¨ìœ„**ì…ë‹ˆë‹¤. ë§ˆì¹˜ ì „ìíšŒë¡œì˜ ë¶€í’ˆì´ë‚˜ ìŠ¤íŠœë””ì˜¤ ì¥ë¹„ í•˜ë‚˜í•˜ë‚˜ì™€ ê°™ìŠµë‹ˆë‹¤.

### ğŸ”Œ ì „ìíšŒë¡œì— ë¹„ìœ 

```
ì „ìíšŒë¡œ:        [ì €í•­] â†’ [ì½˜ë´ì„œ] â†’ [íŠ¸ëœì§€ìŠ¤í„°] â†’ [ìŠ¤í”¼ì»¤]
Web Audio API:   [Gain] â†’ [Filter] â†’ [Oscillator] â†’ [destination]
```

### AudioNodeì˜ ê³µí†µ íŠ¹ì§•

#### 1. ì…ë ¥ê³¼ ì¶œë ¥

```javascript
// ëª¨ë“  AudioNodeëŠ” ì…ë ¥ê³¼ ì¶œë ¥ì„ ê°€ì§
const gainNode = audioContext.createGain()
console.log(gainNode.numberOfInputs) // 1 (ì†Œë¦¬ ì…ë ¥)
console.log(gainNode.numberOfOutputs) // 1 (ì†Œë¦¬ ì¶œë ¥)

// ì˜ˆì‹œ
const oscillator = audioContext.createOscillator()
console.log(oscillator.numberOfInputs) // 0 (ì†ŒìŠ¤ ë…¸ë“œ)
console.log(oscillator.numberOfOutputs) // 1
```

#### 2. íŒŒë¼ë¯¸í„° (AudioParam)

```javascript
// ëŒ€ë¶€ë¶„ì˜ ë…¸ë“œëŠ” ì¡°ì ˆ ê°€ëŠ¥í•œ íŒŒë¼ë¯¸í„°ë¥¼ ê°€ì§
const gainNode = audioContext.createGain()

// gainì€ AudioParam ê°ì²´
console.log(gainNode.gain.value) // í˜„ì¬ ê°’
gainNode.gain.value = 0.5 // ì¦‰ì‹œ ë³€ê²½

// ë¶€ë“œëŸ¬ìš´ ë³€í™” (ìë™í™”)
gainNode.gain.linearRampToValueAtTime(0.8, audioContext.currentTime + 1)
```

### ì£¼ìš” AudioNode ì¢…ë¥˜ë“¤

#### 1. ì†ŒìŠ¤ ë…¸ë“œë“¤ (Source Nodes)

ì†Œë¦¬ë¥¼ ë§Œë“¤ì–´ë‚´ëŠ” ë…¸ë“œë“¤ (ì…ë ¥ ì—†ìŒ, ì¶œë ¥ë§Œ ìˆìŒ)

```javascript
// 1) ì˜¤ì‹¤ë ˆì´í„° (ì‹ ë””ì‚¬ì´ì €ì²˜ëŸ¼ íŒŒí˜• ìƒì„±)
const oscillator = audioContext.createOscillator()
oscillator.type = 'sine' // ì‚¬ì¸íŒŒ
oscillator.frequency.value = 440 // 440Hz (ë¼ ìŒ)

// ë‹¤ì–‘í•œ íŒŒí˜•
oscillator.type = 'sine' // ì‚¬ì¸íŒŒ (ë¶€ë“œëŸ¬ìš´ ì†Œë¦¬)
oscillator.type = 'square' // ì‚¬ê°íŒŒ (ë‚ ì¹´ë¡œìš´ ì†Œë¦¬)
oscillator.type = 'sawtooth' // í†±ë‹ˆíŒŒ (ë°ì€ ì†Œë¦¬)
oscillator.type = 'triangle' // ì‚¼ê°íŒŒ (ë¶€ë“œëŸ¬ìš°ë©´ì„œ ë°ìŒ)

// 2) ì˜¤ë””ì˜¤ ë²„í¼ (ë…¹ìŒëœ ì†Œë¦¬ ì¬ìƒ)
const bufferSource = audioContext.createBufferSource()
// bufferSource.buffer = ì–´ë–¤ì˜¤ë””ì˜¤ë²„í¼;

// 3) ë¯¸ë””ì–´ ì—˜ë¦¬ë¨¼íŠ¸ (HTML <audio> íƒœê·¸ ì—°ê²°)
const audio = document.querySelector('audio')
const mediaSource = audioContext.createMediaElementSource(audio)
```

#### 2. ì´í™íŠ¸ ë…¸ë“œë“¤ (Effect Nodes)

ì†Œë¦¬ë¥¼ ë³€í˜•í•˜ëŠ” ë…¸ë“œë“¤ (ì…ë ¥ê³¼ ì¶œë ¥ ëª¨ë‘ ìˆìŒ)

```javascript
// 1) ê²Œì¸ (ë³¼ë¥¨ ì¡°ì ˆ)
const gainNode = audioContext.createGain()
gainNode.gain.value = 0.5 // 50% ë³¼ë¥¨

// 2) í•„í„° (ì£¼íŒŒìˆ˜ ì¡°ì ˆ)
const filterNode = audioContext.createBiquadFilter()
filterNode.type = 'lowpass'
filterNode.frequency.value = 1000

// 3) ë”œë ˆì´ (ì—ì½” íš¨ê³¼)
const delayNode = audioContext.createDelay()
delayNode.delayTime.value = 0.3 // 0.3ì´ˆ ë”œë ˆì´

// 4) ì»¨ë³¼ë£¨ì…˜ (ë¦¬ë²„ë¸Œ íš¨ê³¼)
const convolverNode = audioContext.createConvolver()
// convolverNode.buffer = ë¦¬ë²„ë¸Œì„í„ìŠ¤ì‘ë‹µ;
```

#### 3. ëª©ì ì§€ ë…¸ë“œ (Destination Node)

```javascript
// ìµœì¢… ì¶œë ¥ (ìŠ¤í”¼ì»¤) - í•­ìƒ ì¡´ì¬
const destination = audioContext.destination
console.log(destination.maxChannelCount) // ë³´í†µ 2 (ìŠ¤í…Œë ˆì˜¤)
```

#### 4. ë¶„ì„ ë…¸ë“œë“¤ (Analysis Nodes)

```javascript
// ì• ë„ë¼ì´ì € (ì£¼íŒŒìˆ˜ ë¶„ì„)
const analyser = audioContext.createAnalyser()
analyser.fftSize = 256

// ì£¼íŒŒìˆ˜ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
const bufferLength = analyser.frequencyBinCount
const dataArray = new Uint8Array(bufferLength)
analyser.getByteFrequencyData(dataArray)
```

---

## connect() ë©”ì†Œë“œë¡œ ë…¸ë“œ ì—°ê²°í•˜ê¸°

**connect()**ëŠ” AudioNodeë“¤ì„ ì—°ê²°í•˜ëŠ” **ì „ì„ ** ì—­í• ì„ í•©ë‹ˆë‹¤. ì‹ í˜¸ì˜ íë¦„ì„ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.

### ğŸ”Œ ê¸°ë³¸ ì—°ê²° ë°©ë²•

#### 1. ë‹¨ìˆœ ì—°ê²°

```javascript
// ê¸°ë³¸ ë¬¸ë²•: source.connect(destination)
const oscillator = audioContext.createOscillator()
const gainNode = audioContext.createGain()

// ì—°ê²°: ì˜¤ì‹¤ë ˆì´í„° â†’ ê²Œì¸ ë…¸ë“œ
oscillator.connect(gainNode)

// ìµœì¢… ì¶œë ¥ì— ì—°ê²°: ê²Œì¸ ë…¸ë“œ â†’ ìŠ¤í”¼ì»¤
gainNode.connect(audioContext.destination)
```

#### 2. ì²´ì¸ ì—°ê²° (ì—¬ëŸ¬ ì´í™íŠ¸)

```javascript
// ì‹ í˜¸ íë¦„: ì˜¤ì‹¤ë ˆì´í„° â†’ í•„í„° â†’ ê²Œì¸ â†’ ë”œë ˆì´ â†’ ìŠ¤í”¼ì»¤
const oscillator = audioContext.createOscillator()
const filter = audioContext.createBiquadFilter()
const gain = audioContext.createGain()
const delay = audioContext.createDelay()

// ìˆœì„œëŒ€ë¡œ ì—°ê²°
oscillator.connect(filter)
filter.connect(gain)
gain.connect(delay)
delay.connect(audioContext.destination)

// ì„¤ì •
oscillator.type = 'sawtooth'
oscillator.frequency.value = 220
filter.type = 'lowpass'
filter.frequency.value = 1500
gain.gain.value = 0.4
delay.delayTime.value = 0.25

// ì‹œì‘
oscillator.start()
```

### ğŸ”„ ê³ ê¸‰ ì—°ê²° íŒ¨í„´

#### 1. ë¶„ê¸° (Split) - í•˜ë‚˜ì˜ ì†ŒìŠ¤ë¥¼ ì—¬ëŸ¬ ê³³ìœ¼ë¡œ

```javascript
const oscillator = audioContext.createOscillator()
const gain1 = audioContext.createGain()
const gain2 = audioContext.createGain()

// í•˜ë‚˜ì˜ ì˜¤ì‹¤ë ˆì´í„°ë¥¼ ë‘ ê°œì˜ ê²Œì¸ ë…¸ë“œë¡œ ë¶„ê¸°
oscillator.connect(gain1)
oscillator.connect(gain2) // ê°™ì€ ì†ŒìŠ¤ì—ì„œ ì—¬ëŸ¬ ì—°ê²° ê°€ëŠ¥

// ê°ê° ë‹¤ë¥¸ ë³¼ë¥¨ìœ¼ë¡œ ìµœì¢… ì¶œë ¥
gain1.gain.value = 0.3
gain2.gain.value = 0.7
gain1.connect(audioContext.destination)
gain2.connect(audioContext.destination)
```

#### 2. ë¯¹ì‹± (Mix) - ì—¬ëŸ¬ ì†ŒìŠ¤ë¥¼ í•˜ë‚˜ë¡œ í•©ì¹˜ê¸°

```javascript
const osc1 = audioContext.createOscillator()
const osc2 = audioContext.createOscillator()
const mixer = audioContext.createGain() // ë¯¹ì„œ ì—­í• 

// ë‘ ì˜¤ì‹¤ë ˆì´í„°ë¥¼ í•˜ë‚˜ì˜ ë¯¹ì„œë¡œ
osc1.connect(mixer)
osc2.connect(mixer)

// ë¯¹ì„œì—ì„œ ìµœì¢… ì¶œë ¥ìœ¼ë¡œ
mixer.connect(audioContext.destination)
```

#### 3. ë³‘ë ¬ ì²˜ë¦¬ (Parallel) - ê°™ì€ ì†ŒìŠ¤ì— ë‹¤ë¥¸ ì´í™íŠ¸ë“¤

```javascript
const source = audioContext.createOscillator()

// ì›ë³¸ ì‹ í˜¸
const dryGain = audioContext.createGain()
source.connect(dryGain)

// ë”œë ˆì´ íš¨ê³¼
const delay = audioContext.createDelay()
const wetGain = audioContext.createGain()
source.connect(delay)
delay.connect(wetGain)

// ë‘ ì‹ í˜¸ë¥¼ ë¯¹ì‹±
const output = audioContext.createGain()
dryGain.connect(output)
wetGain.connect(output)
output.connect(audioContext.destination)

// ë“œë¼ì´/ì›» ë°¸ëŸ°ìŠ¤ ì¡°ì ˆ
dryGain.gain.value = 0.7 // ì›ë³¸ 70%
wetGain.gain.value = 0.3 // ì´í™íŠ¸ 30%
```

### ğŸ”Œ ì—°ê²° ê´€ë¦¬

#### ì—°ê²° í•´ì œ

```javascript
// íŠ¹ì • ì—°ê²° í•´ì œ
oscillator.disconnect(gainNode)

// ëª¨ë“  ì—°ê²° í•´ì œ
oscillator.disconnect()

// ë‹¤ì‹œ ì—°ê²°
oscillator.connect(gainNode)
```

---

## BiquadFilterNode ì‚¬ìš©ë²•

**BiquadFilterNode**ëŠ” ë””ì§€í„¸ ì˜¤ë””ì˜¤ì˜ **ë§ˆë²• ë„êµ¬**ì…ë‹ˆë‹¤. íŠ¹ì • ì£¼íŒŒìˆ˜ë¥¼ ê°•ì¡°í•˜ê±°ë‚˜ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ğŸ›ï¸ ì•„ë‚ ë¡œê·¸ ì´í€„ë¼ì´ì €ì™€ ë¹„êµ

```
ì•„ë‚ ë¡œê·¸ EQ:     [Bass] [Mid] [Treble] ë…¸ë¸Œë“¤
BiquadFilter:    frequency, Q, gain íŒŒë¼ë¯¸í„°ë¡œ ì •ë°€ ì œì–´
```

### ê¸°ë³¸ ìƒì„± ë° ì„¤ì •

```javascript
// í•„í„° ìƒì„±
const filter = audioContext.createBiquadFilter()

// ê¸°ë³¸ íŒŒë¼ë¯¸í„°ë“¤
filter.type = 'lowpass' // í•„í„° íƒ€ì…
filter.frequency.value = 1000 // ì»·ì˜¤í”„/ì¤‘ì‹¬ ì£¼íŒŒìˆ˜ (Hz)
filter.Q.value = 1 // ê³µëª… (í’ˆì§ˆ ê³„ìˆ˜)
filter.gain.value = 0 // ê²Œì¸ (dB) - ì¼ë¶€ íƒ€ì…ì—ì„œë§Œ ì‚¬ìš©
```

### ğŸšï¸ í•„í„° íƒ€ì…ë“¤ (type ì†ì„±)

#### 1. ë¡œìš°íŒ¨ìŠ¤ (lowpass) - ê³ ìŒ ì œê±°

```javascript
filter.type = 'lowpass'
filter.frequency.value = 2000 // 2000Hz ì´ìƒ ì£¼íŒŒìˆ˜ ì œê±°

// ì‚¬ìš© ì˜ˆ: ë”°ëœ»í•œ ëŠë‚Œ, ë©€ë¦¬ì„œ ë“¤ë¦¬ëŠ” íš¨ê³¼
// ì‹¤ìƒí™œ ì˜ˆ: ë¼ë””ì˜¤ë¥¼ ë©€ë¦¬ì„œ ë“£ëŠ” ì†Œë¦¬, ë²½ ë„ˆë¨¸ ì†Œë¦¬
```

#### 2. í•˜ì´íŒ¨ìŠ¤ (highpass) - ì €ìŒ ì œê±°

```javascript
filter.type = 'highpass'
filter.frequency.value = 200 // 200Hz ì´í•˜ ì£¼íŒŒìˆ˜ ì œê±°

// ì‚¬ìš© ì˜ˆ: ì„ ëª…í•œ ëŠë‚Œ, ì „í™”ê¸° ì†Œë¦¬
// ì‹¤ìƒí™œ ì˜ˆ: ì–‡ì€ ìŠ¤í”¼ì»¤, ì „í™” í†µí™”ìŒ
```

#### 3. ë°´ë“œíŒ¨ìŠ¤ (bandpass) - íŠ¹ì • ë²”ìœ„ë§Œ í†µê³¼

```javascript
filter.type = 'bandpass'
filter.frequency.value = 1000 // 1000Hz ê·¼ì²˜ë§Œ í†µê³¼
filter.Q.value = 10 // Qê°’ì´ í´ìˆ˜ë¡ ì¢ì€ ë²”ìœ„

// ì‚¬ìš© ì˜ˆ: íŠ¹ì • ì•…ê¸°ë§Œ ê°•ì¡°, ë³´ì»¬ ë¶„ë¦¬
// ì‹¤ìƒí™œ ì˜ˆ: ì›Œí‚¤í† í‚¤, ë¼ë””ì˜¤ íŠœë‹
```

#### 4. ë°´ë“œìŠ¤í†±/ë…¸ì¹˜ (bandstop/notch) - íŠ¹ì • ë²”ìœ„ ì œê±°

```javascript
filter.type = 'notch'
filter.frequency.value = 60 // 60Hz ì œê±° (ì „ì› í—˜ìŒ ì œê±°)
filter.Q.value = 20 // ë§¤ìš° ì¢ì€ ë²”ìœ„ë§Œ ì œê±°

// ì‚¬ìš© ì˜ˆ: íŠ¹ì • ë…¸ì´ì¦ˆ ì œê±°, í•˜ìš¸ë§ ì œê±°
// ì‹¤ìƒí™œ ì˜ˆ: ì—ì–´ì»¨ ì†ŒìŒ ì œê±°, ë§ˆì´í¬ í”¼ë“œë°± ë°©ì§€
```

#### 5. ë¡œìš°ì…¸í”„ (lowshelf) - ì €ìŒ ì „ì²´ ì¡°ì ˆ

```javascript
filter.type = 'lowshelf'
filter.frequency.value = 320 // 320Hz ì´í•˜ ì „ì²´ ì¡°ì ˆ
filter.gain.value = -6 // -6dB ê°ì†Œ (ë˜ëŠ” +6dB ì¦ê°€ ê°€ëŠ¥)

// ì‚¬ìš© ì˜ˆ: ë² ì´ìŠ¤ ì¡°ì ˆ, ì „ì²´ì ì¸ í†¤ ì¡°ì •
// ì‹¤ìƒí™œ ì˜ˆ: ì˜¤ë””ì˜¤ ì‹œìŠ¤í…œì˜ ë² ì´ìŠ¤ ì¡°ì ˆ
```

#### 6. í•˜ì´ì…¸í”„ (highshelf) - ê³ ìŒ ì „ì²´ ì¡°ì ˆ

```javascript
filter.type = 'highshelf'
filter.frequency.value = 3200 // 3200Hz ì´ìƒ ì „ì²´ ì¡°ì ˆ
filter.gain.value = 3 // +3dB ì¦ê°€

// ì‚¬ìš© ì˜ˆ: ê³ ìŒ ì„ ëª…ë„ ì¡°ì ˆ, ì—ì–´ë¦¬í•œ ëŠë‚Œ
// ì‹¤ìƒí™œ ì˜ˆ: ì˜¤ë””ì˜¤ ì‹œìŠ¤í…œì˜ íŠ¸ë ˆë¸” ì¡°ì ˆ
```

#### 7. í”¼í‚¹ (peaking) - íŠ¹ì • ì£¼íŒŒìˆ˜ ê°•ì¡°/ê°ì†Œ

```javascript
filter.type = 'peaking'
filter.frequency.value = 2500 // 2500Hz ì¡°ì ˆ
filter.Q.value = 2 // ì¡°ì ˆ ë²”ìœ„ì˜ í­
filter.gain.value = 8 // +8dB ë¶€ìŠ¤íŠ¸

// ì‚¬ìš© ì˜ˆ: ë³´ì»¬ ì¡´ì¬ê°, ì•…ê¸° íŠ¹ì„± ê°•ì¡°
// ì‹¤ìƒí™œ ì˜ˆ: ë¯¹ì‹±ì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” EQ
```

### ğŸ¯ Qê°’ (í’ˆì§ˆ ê³„ìˆ˜) ì´í•´í•˜ê¸°

Qê°’ì€ í•„í„°ì˜ **ë‚ ì¹´ë¡œì›€**ì„ ê²°ì •í•©ë‹ˆë‹¤.

```javascript
// Qê°’ì— ë”°ë¥¸ íš¨ê³¼
filter.Q.value = 0.5 // ë§¤ìš° ë¶€ë“œëŸ¬ìš´ í•„í„° (ìì—°ìŠ¤ëŸ¬ì›€)
filter.Q.value = 1 // ê¸°ë³¸ê°’ (ì¼ë°˜ì )
filter.Q.value = 5 // ë‚ ì¹´ë¡œìš´ í•„í„° (íŠ¹ë³„í•œ íš¨ê³¼)
filter.Q.value = 20 // ë§¤ìš° ë‚ ì¹´ë¡œìš´ í•„í„° (ë…¸ì¹˜ í•„í„°ì²˜ëŸ¼)

// Qê°’ì´ ë„ˆë¬´ ë†’ìœ¼ë©´ ìê¸° ë°œì§„(self-oscillation) ë°œìƒ ê°€ëŠ¥
// ê³µëª…ìŒì´ ë“¤ë¦´ ìˆ˜ ìˆìŒ
```

### ğŸ“Š ì‹¤ì‹œê°„ íŒŒë¼ë¯¸í„° ì¡°ì ˆ

#### 1. ì¦‰ì‹œ ë³€ê²½

```javascript
// ê°’ ì¦‰ì‹œ ë³€ê²½ (í´ë¦­ìŒ ë°œìƒ ê°€ëŠ¥)
filter.frequency.value = 2000
filter.Q.value = 5
```

#### 2. ë¶€ë“œëŸ¬ìš´ ë³€ê²½ (ê¶Œì¥)

```javascript
// ì„ í˜• ë³€í™” (Linear Ramp)
filter.frequency.linearRampToValueAtTime(
  2000, // ëª©í‘œê°’
  audioContext.currentTime + 1 // 1ì´ˆ í›„ ë„ë‹¬
)

// ì§€ìˆ˜ì  ë³€í™” (Exponential Ramp) - ì£¼íŒŒìˆ˜ì— ë” ìì—°ìŠ¤ëŸ¬ì›€
filter.frequency.exponentialRampToValueAtTime(
  2000, // ëª©í‘œê°’ (0ì´ë©´ ì•ˆë¨!)
  audioContext.currentTime + 0.5 // 0.5ì´ˆ í›„ ë„ë‹¬
)

// íŠ¹ì • ì‹œì ì— ì •í™•í•œ ê°’ ì„¤ì •
filter.frequency.setValueAtTime(
  1000, // ê°’
  audioContext.currentTime // ì§€ê¸ˆ ì¦‰ì‹œ
)
```

### ğŸšï¸ ì‹¤ìš©ì ì¸ í”„ë¦¬ì…‹ë“¤

```javascript
// ìì£¼ ì‚¬ìš©í•˜ëŠ” í•„í„° ì„¤ì •ë“¤

// 1. ë¶€ë“œëŸ¬ìš´ ë¡œìš°íŒ¨ìŠ¤ (ë”°ëœ»í•œ ì†Œë¦¬)
function setupWarmLowpass(filter) {
  filter.type = 'lowpass'
  filter.frequency.value = 2000
  filter.Q.value = 0.7
}

// 2. ì „í™”ê¸° ì†Œë¦¬
function setupTelephoneFilter(filter) {
  filter.type = 'bandpass'
  filter.frequency.value = 1000
  filter.Q.value = 8
}

// 3. ëŸ¼ë¸”(ì €ìŒ ë…¸ì´ì¦ˆ) ì œê±°
function setupRumbleFilter(filter) {
  filter.type = 'highpass'
  filter.frequency.value = 80
  filter.Q.value = 0.5
}

// 4. ë³´ì»¬ ì¡´ì¬ê° í–¥ìƒ
function setupVocalPresence(filter) {
  filter.type = 'peaking'
  filter.frequency.value = 2500
  filter.Q.value = 1.5
  filter.gain.value = 4
}

// 5. í•˜ìš¸ë§ ì œê±° (ì˜ˆ: 500Hz)
function setupNotchFilter(filter, frequency) {
  filter.type = 'notch'
  filter.frequency.value = frequency
  filter.Q.value = 15
}
```

---

### ğŸ“» ê°„ë‹¨í•œ ë¼ë””ì˜¤ ì‹œë®¬ë ˆì´í„°

```javascript
class SimpleRadio {
  constructor() {
    this.audioContext = null
    this.oscillator = null
    this.filter = null
    this.gain = null
    this.isPlaying = false
  }

  async init() {
    // AudioContext ìƒì„±
    this.audioContext = new (window.AudioContext || window.webkitAudioContext)()

    // ë¸Œë¼ìš°ì € ì •ì±… ëŒ€ì‘
    if (this.audioContext.state === 'suspended') {
      await this.audioContext.resume()
    }

    // ë…¸ë“œë“¤ ìƒì„±
    this.oscillator = this.audioContext.createOscillator()
    this.filter = this.audioContext.createBiquadFilter()
    this.gain = this.audioContext.createGain()

    // ê¸°ë³¸ ì„¤ì •
    this.oscillator.type = 'sawtooth' // í†±ë‹ˆíŒŒ (í’ë¶€í•œ í•˜ëª¨ë‹‰)
    this.oscillator.frequency.value = 220 // ë‚®ì€ AìŒ

    this.filter.type = 'lowpass'
    this.filter.frequency.value = 1000
    this.filter.Q.value = 1

    this.gain.gain.value = 0.3

    // ì˜¤ë””ì˜¤ ê·¸ë˜í”„ ì—°ê²°
    this.oscillator.connect(this.filter)
    this.filter.connect(this.gain)
    this.gain.connect(this.audioContext.destination)

    console.log('ë¼ë””ì˜¤ ì´ˆê¸°í™” ì™„ë£Œ')
  }

  start() {
    if (!this.isPlaying) {
      this.oscillator.start()
      this.isPlaying = true
      console.log('ë¼ë””ì˜¤ ë°©ì†¡ ì‹œì‘')
    }
  }

  stop() {
    if (this.isPlaying) {
      this.oscillator.stop()
      this.isPlaying = false
      console.log('ë¼ë””ì˜¤ ë°©ì†¡ ì •ì§€')
    }
  }

  // ì£¼íŒŒìˆ˜ íŠœë‹ (ë¼ë””ì˜¤ ì±„ë„ ë³€ê²½)
  tuneFrequency(frequency) {
    if (this.oscillator && this.isPlaying) {
      this.oscillator.frequency.exponentialRampToValueAtTime(
        frequency,
        this.audioContext.currentTime + 0.1
      )
      console.log(`ì£¼íŒŒìˆ˜ ë³€ê²½: ${frequency}Hz`)
    }
  }

  // í•„í„° ì¡°ì ˆ (ìŒì§ˆ ì¡°ì ˆ)
  adjustTone(cutoff, resonance = 1) {
    if (this.filter) {
      this.filter.frequency.exponentialRampToValueAtTime(
        cutoff,
        this.audioContext.currentTime + 0.1
      )
      this.filter.Q.setValueAtTime(resonance, this.audioContext.currentTime)
      console.log(`í†¤ ì¡°ì ˆ: ${cutoff}Hz, Q=${resonance}`)
    }
  }

  // ë³¼ë¥¨ ì¡°ì ˆ
  setVolume(volume) {
    if (this.gain) {
      this.gain.gain.linearRampToValueAtTime(volume, this.audioContext.currentTime + 0.1)
      console.log(`ë³¼ë¥¨: ${Math.round(volume * 100)}%`)
    }
  }
}

// ì‚¬ìš© ì˜ˆì œ
const radio = new SimpleRadio()

// ì´ˆê¸°í™”
document.getElementById('initRadio').addEventListener('click', async () => {
  await radio.init()
})

// ì‹œì‘/ì •ì§€
document.getElementById('startRadio').addEventListener('click', () => {
  radio.start()
})

document.getElementById('stopRadio').addEventListener('click', () => {
  radio.stop()
})

// ì‹¤ì‹œê°„ ì¡°ì ˆ
document.getElementById('frequencySlider').addEventListener('input', (e) => {
  radio.tuneFrequency(parseFloat(e.target.value))
})

document.getElementById('toneSlider').addEventListener('input', (e) => {
  radio.adjustTone(parseFloat(e.target.value))
})

document.getElementById('volumeSlider').addEventListener('input', (e) => {
  radio.setVolume(parseFloat(e.target.value))
})
```

### ğŸ¸ ê¸°íƒ€ ì´í™í„° ì²´ì¸

```javascript
class GuitarEffects {
  constructor() {
    this.audioContext = null
    this.nodes = {}
    this.isActive = false
  }

  async init() {
    // AudioContext ë° ë§ˆì´í¬ ì…ë ¥ ì„¤ì •
    this.audioContext = new (window.AudioContext || window.webkitAudioContext)()

    if (this.audioContext.state === 'suspended') {
      await this.audioContext.resume()
    }

    // ë§ˆì´í¬ ì…ë ¥
    try {
      const stream = await navigator.mediaDevices.getUserMedia({ audio: true })
      this.nodes.input = this.audioContext.createMediaStreamSource(stream)
    } catch (error) {
      console.error('ë§ˆì´í¬ ì ‘ê·¼ ì‹¤íŒ¨:', error)
      return
    }

    // ì´í™íŠ¸ ì²´ì¸ êµ¬ì„±
    this.createEffectChain()
    this.connectNodes()

    this.isActive = true
    console.log('ê¸°íƒ€ ì´í™í„° ì¤€ë¹„ ì™„ë£Œ')
  }

  createEffectChain() {
    // ì…ë ¥ ê²Œì¸
    this.nodes.inputGain = this.audioContext.createGain()
    this.nodes.inputGain.gain.value = 2.0 // ì…ë ¥ ì¦í­

    // í•˜ì´íŒ¨ìŠ¤ í•„í„° (ëŸ¼ë¸” ì œê±°)
    this.nodes.highpass = this.audioContext.createBiquadFilter()
    this.nodes.highpass.type = 'highpass'
    this.nodes.highpass.frequency.value = 80
    this.nodes.highpass.Q.value = 0.5

    // ì˜¤ë²„ë“œë¼ì´ë¸Œ (ì›¨ì´ë¸Œì…°ì´í¼)
    this.nodes.overdrive = this.audioContext.createWaveShaper()
    this.setupOverdrive(5) // ì¤‘ê°„ ì •ë„ ì˜¤ë²„ë“œë¼ì´ë¸Œ

    // í†¤ ì»¨íŠ¸ë¡¤ (ë¡œìš°íŒ¨ìŠ¤)
    this.nodes.toneControl = this.audioContext.createBiquadFilter()
    this.nodes.toneControl.type = 'lowpass'
    this.nodes.toneControl.frequency.value = 3000
    this.nodes.toneControl.Q.value = 1

    // ë”œë ˆì´ ì´í™íŠ¸
    this.nodes.delay = this.audioContext.createDelay(1.0)
    this.nodes.delay.delayTime.value = 0.25

    this.nodes.delayFeedback = this.audioContext.createGain()
    this.nodes.delayFeedback.gain.value = 0.3

    this.nodes.delayMix = this.audioContext.createGain()
    this.nodes.delayMix.gain.value = 0.3

    // ìµœì¢… ì¶œë ¥ ê²Œì¸
    this.nodes.outputGain = this.audioContext.createGain()
    this.nodes.outputGain.gain.value = 0.5
  }

  setupOverdrive(amount) {
    const samples = 44100
    const curve = new Float32Array(samples)
    const deg = Math.PI / 180

    for (let i = 0; i < samples; i++) {
      const x = (i * 2) / samples - 1
      curve[i] = ((3 + amount) * x * 20 * deg) / (Math.PI + amount * Math.abs(x))
    }

    this.nodes.overdrive.curve = curve
    this.nodes.overdrive.oversample = '4x'
  }

  connectNodes() {
    // ë©”ì¸ ì‹ í˜¸ ì²´ì¸
    this.nodes.input.connect(this.nodes.inputGain)
    this.nodes.inputGain.connect(this.nodes.highpass)
    this.nodes.highpass.connect(this.nodes.overdrive)
    this.nodes.overdrive.connect(this.nodes.toneControl)

    // ë”œë ˆì´ ì²´ì¸ (ë³‘ë ¬ ì²˜ë¦¬)
    this.nodes.toneControl.connect(this.nodes.delay)
    this.nodes.delay.connect(this.nodes.delayFeedback)
    this.nodes.delayFeedback.connect(this.nodes.delay) // í”¼ë“œë°± ë£¨í”„
    this.nodes.delay.connect(this.nodes.delayMix)

    // ë¯¹ì‹±: ë“œë¼ì´ + ì›» ì‹ í˜¸
    this.nodes.toneControl.connect(this.nodes.outputGain) // ë“œë¼ì´ ì‹ í˜¸
    this.nodes.delayMix.connect(this.nodes.outputGain) // ì›» ì‹ í˜¸

    // ìµœì¢… ì¶œë ¥
    this.nodes.outputGain.connect(this.audioContext.destination)
  }

  // ì»¨íŠ¸ë¡¤ ë©”ì†Œë“œë“¤
  setInputGain(value) {
    if (this.nodes.inputGain) {
      this.nodes.inputGain.gain.setValueAtTime(value, this.audioContext.currentTime)
    }
  }

  setOverdrive(amount) {
    this.setupOverdrive(amount)
  }

  setTone(frequency) {
    if (this.nodes.toneControl) {
      this.nodes.toneControl.frequency.exponentialRampToValueAtTime(
        frequency,
        this.audioContext.currentTime + 0.1
      )
    }
  }

  setDelay(time, feedback, mix) {
    if (this.nodes.delay) {
      this.nodes.delay.delayTime.setValueAtTime(time, this.audioContext.currentTime)
    }
    if (this.nodes.delayFeedback) {
      this.nodes.delayFeedback.gain.setValueAtTime(feedback, this.audioContext.currentTime)
    }
    if (this.nodes.delayMix) {
      this.nodes.delayMix.gain.setValueAtTime(mix, this.audioContext.currentTime)
    }
  }

  setVolume(volume) {
    if (this.nodes.outputGain) {
      this.nodes.outputGain.gain.linearRampToValueAtTime(
        volume,
        this.audioContext.currentTime + 0.1
      )
    }
  }
}

// ì‚¬ìš© ì˜ˆì œ
const guitar = new GuitarEffects()

// HTML ì»¨íŠ¸ë¡¤ë“¤ê³¼ ì—°ê²°
document.getElementById('initGuitar').addEventListener('click', async () => {
  await guitar.init()
})

document.getElementById('gainSlider').addEventListener('input', (e) => {
  guitar.setInputGain(parseFloat(e.target.value))
})

document.getElementById('overdriveSlider').addEventListener('input', (e) => {
  guitar.setOverdrive(parseFloat(e.target.value))
})

document.getElementById('toneSlider').addEventListener('input', (e) => {
  guitar.setTone(parseFloat(e.target.value))
})

document.getElementById('delayTimeSlider').addEventListener('input', (e) => {
  const time = parseFloat(e.target.value)
  const feedback = parseFloat(document.getElementById('delayFeedbackSlider').value)
  const mix = parseFloat(document.getElementById('delayMixSlider').value)
  guitar.setDelay(time, feedback, mix)
})
```

### ğŸµ ê³ ê¸‰ ì˜ˆì œ: ì‹¤ì‹œê°„ ìŠ¤í™íŠ¸ëŸ¼ ì• ë„ë¼ì´ì €

```javascript
class SpectrumAnalyzer {
  constructor(canvasId) {
    this.canvas = document.getElementById(canvasId)
    this.ctx = this.canvas.getContext('2d')
    this.audioContext = null
    this.analyser = null
    this.source = null
    this.animationId = null

    // ìº”ë²„ìŠ¤ ì„¤ì •
    this.canvas.width = 800
    this.canvas.height = 400
  }

  async init() {
    // AudioContext ìƒì„±
    this.audioContext = new (window.AudioContext || window.webkitAudioContext)()

    if (this.audioContext.state === 'suspended') {
      await this.audioContext.resume()
    }

    // ì• ë„ë¼ì´ì € ë…¸ë“œ ìƒì„±
    this.analyser = this.audioContext.createAnalyser()
    this.analyser.fftSize = 256
    this.analyser.smoothingTimeConstant = 0.8

    // ë§ˆì´í¬ ì…ë ¥ ì—°ê²°
    try {
      const stream = await navigator.mediaDevices.getUserMedia({ audio: true })
      this.source = this.audioContext.createMediaStreamSource(stream)
      this.source.connect(this.analyser)
      // ë…¸íŠ¸: ìŠ¤í”¼ì»¤ ì¶œë ¥ì€ ì—°ê²°í•˜ì§€ ì•ŠìŒ (í”¼ë“œë°± ë°©ì§€)

      console.log('ìŠ¤í™íŠ¸ëŸ¼ ì• ë„ë¼ì´ì € ì¤€ë¹„ ì™„ë£Œ')
      this.startVisualization()
    } catch (error) {
      console.error('ë§ˆì´í¬ ì ‘ê·¼ ì‹¤íŒ¨:', error)
    }
  }

  startVisualization() {
    const bufferLength = this.analyser.frequencyBinCount
    const dataArray = new Uint8Array(bufferLength)

    const draw = () => {
      this.animationId = requestAnimationFrame(draw)

      // ì£¼íŒŒìˆ˜ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
      this.analyser.getByteFrequencyData(dataArray)

      // ìº”ë²„ìŠ¤ ì´ˆê¸°í™”
      this.ctx.fillStyle = 'rgb(20, 20, 20)'
      this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height)

      // ì£¼íŒŒìˆ˜ ë°” ê·¸ë¦¬ê¸°
      const barWidth = (this.canvas.width / bufferLength) * 2.5
      let barHeight
      let x = 0

      for (let i = 0; i < bufferLength; i++) {
        barHeight = (dataArray[i] / 255) * this.canvas.height

        // ì£¼íŒŒìˆ˜ì— ë”°ë¥¸ ìƒ‰ìƒ ë³€í™”
        const hue = (i / bufferLength) * 360
        this.ctx.fillStyle = `hsl(${hue}, 70%, 50%)`

        this.ctx.fillRect(x, this.canvas.height - barHeight, barWidth, barHeight)

        x += barWidth + 1
      }

      // ì£¼íŒŒìˆ˜ ë ˆì´ë¸” ê·¸ë¦¬ê¸°
      this.drawFrequencyLabels(bufferLength)
    }

    draw()
  }

  drawFrequencyLabels(bufferLength) {
    const sampleRate = this.audioContext.sampleRate
    const nyquist = sampleRate / 2

    this.ctx.fillStyle = 'white'
    this.ctx.font = '12px Arial'
    this.ctx.textAlign = 'center'

    // ì£¼ìš” ì£¼íŒŒìˆ˜ ë§ˆí‚¹
    const frequencies = [100, 1000, 5000, 10000]

    frequencies.forEach((freq) => {
      if (freq <= nyquist) {
        const x = (freq / nyquist) * (this.canvas.width / 2.5)
        this.ctx.fillText(`${freq}Hz`, x, this.canvas.height - 10)

        // ìˆ˜ì§ì„  ê·¸ë¦¬ê¸°
        this.ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)'
        this.ctx.beginPath()
        this.ctx.moveTo(x, 0)
        this.ctx.lineTo(x, this.canvas.height - 30)
        this.ctx.stroke()
      }
    })
  }

  stop() {
    if (this.animationId) {
      cancelAnimationFrame(this.animationId)
    }
    if (this.audioContext) {
      this.audioContext.close()
    }
  }
}

// ì‚¬ìš© ì˜ˆì œ
const analyzer = new SpectrumAnalyzer('spectrumCanvas')

document.getElementById('startAnalyzer').addEventListener('click', async () => {
  await analyzer.init()
})

document.getElementById('stopAnalyzer').addEventListener('click', () => {
  analyzer.stop()
})
```

---

## ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜ë“¤

### âŒ ì‹¤ìˆ˜ 1: AudioContext ìƒíƒœ ë¬´ì‹œ

```javascript
// ì˜ëª»ëœ ì½”ë“œ
const audioContext = new AudioContext()
const oscillator = audioContext.createOscillator()
oscillator.connect(audioContext.destination)
oscillator.start() // ë¸Œë¼ìš°ì € ì •ì±…ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ
```

```javascript
// ì˜¬ë°”ë¥¸ ì½”ë“œ
button.addEventListener('click', async () => {
  const audioContext = new AudioContext()

  if (audioContext.state === 'suspended') {
    await audioContext.resume()
  }

  const oscillator = audioContext.createOscillator()
  oscillator.connect(audioContext.destination)
  oscillator.start()
})
```

### âŒ ì‹¤ìˆ˜ 2: ì˜¤ì‹¤ë ˆì´í„° ì¬ì‚¬ìš© ì‹œë„

```javascript
// ì˜ëª»ëœ ì½”ë“œ
const oscillator = audioContext.createOscillator()
oscillator.start()
oscillator.stop()
oscillator.start() // ì—ëŸ¬! ì˜¤ì‹¤ë ˆì´í„°ëŠ” ì¼íšŒìš©
```

```javascript
// ì˜¬ë°”ë¥¸ ì½”ë“œ
function createAndStartOscillator() {
  const oscillator = audioContext.createOscillator()
  oscillator.connect(audioContext.destination)
  oscillator.start()
  return oscillator
}

// ë§¤ë²ˆ ìƒˆë¡œìš´ ì˜¤ì‹¤ë ˆì´í„° ìƒì„±
const osc1 = createAndStartOscillator()
const osc2 = createAndStartOscillator()
```

### âŒ ì‹¤ìˆ˜ 3: ë©”ëª¨ë¦¬ ëˆ„ìˆ˜

```javascript
// ì˜ëª»ëœ ì½”ë“œ - ì—°ê²° í•´ì œí•˜ì§€ ì•ŠìŒ
function playSound() {
  const oscillator = audioContext.createOscillator()
  oscillator.connect(audioContext.destination)
  oscillator.start()
  oscillator.stop(audioContext.currentTime + 1)
  // disconnect()ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šì•„ì„œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°œìƒ
}
```

```javascript
// ì˜¬ë°”ë¥¸ ì½”ë“œ
function playSound() {
  const oscillator = audioContext.createOscillator()
  oscillator.connect(audioContext.destination)
  oscillator.start()

  oscillator.addEventListener('ended', () => {
    oscillator.disconnect() // ë©”ëª¨ë¦¬ í•´ì œ
  })

  oscillator.stop(audioContext.currentTime + 1)
}
```

### âŒ ì‹¤ìˆ˜ 4: íŒŒë¼ë¯¸í„° ì¦‰ì‹œ ë³€ê²½ìœ¼ë¡œ ì¸í•œ í´ë¦­ìŒ

```javascript
// ì˜ëª»ëœ ì½”ë“œ - í´ë¦­ìŒ ë°œìƒ
gainNode.gain.value = 0 // ê¸‰ê²©í•œ ë³€í™”ë¡œ í´ë¦­ìŒ ë°œìƒ
```

```javascript
// ì˜¬ë°”ë¥¸ ì½”ë“œ - ë¶€ë“œëŸ¬ìš´ ë³€í™”
gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + 0.1)
```

### âŒ ì‹¤ìˆ˜ 5: ì˜ëª»ëœ ì£¼íŒŒìˆ˜ ë²”ìœ„

```javascript
// ì˜ëª»ëœ ì½”ë“œ
filter.frequency.exponentialRampToValueAtTime(0, audioContext.currentTime + 1)
// exponentialRampëŠ” 0ì— ë„ë‹¬í•  ìˆ˜ ì—†ìŒ!
```

```javascript
// ì˜¬ë°”ë¥¸ ì½”ë“œ
filter.frequency.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1)
// ë˜ëŠ” linearRamp ì‚¬ìš©
filter.frequency.linearRampToValueAtTime(0, audioContext.currentTime + 1)
```

### âŒ ì‹¤ìˆ˜ 6: ë¶€ì ì ˆí•œ ë³¼ë¥¨ ë ˆë²¨

```javascript
// ì˜ëª»ëœ ì½”ë“œ - ë„ˆë¬´ í° ë³¼ë¥¨
gainNode.gain.value = 10 // ì™œê³¡ê³¼ í´ë¦¬í•‘ ë°œìƒ ê°€ëŠ¥
```

```javascript
// ì˜¬ë°”ë¥¸ ì½”ë“œ - ì ì ˆí•œ ë³¼ë¥¨ ê´€ë¦¬
gainNode.gain.value = 0.3 // ì¼ë°˜ì ìœ¼ë¡œ 0.0 ~ 1.0 ë²”ìœ„ ì‚¬ìš©

// ë˜ëŠ” dB ë‹¨ìœ„ë¡œ ê³„ì‚°
function dbToLinear(db) {
  return Math.pow(10, db / 20)
}

gainNode.gain.value = dbToLinear(-6) // -6dB
```

---

## ë§ˆë¬´ë¦¬

ì´ ê°€ì´ë“œë¥¼ í†µí•´ Web Audio APIì˜ í•µì‹¬ ê°œë…ë“¤ì„ ì™„ì „íˆ ì´í•´í–ˆìŠµë‹ˆë‹¤:

### ğŸ¯ í•™ìŠµí•œ í•µì‹¬ ê°œë…ë“¤

- **AudioContext**: ì˜¤ë””ì˜¤ ì²˜ë¦¬ì˜ ì¤‘ì•™ ê´€ë¦¬ì
- **AudioNode**: ëª¨ë“ˆëŸ¬ ì˜¤ë””ì˜¤ ì²˜ë¦¬ ë‹¨ìœ„
- **connect()**: ë…¸ë“œ ê°„ ì‹ í˜¸ íë¦„ ì—°ê²°
- **BiquadFilterNode**: ê°•ë ¥í•œ ì£¼íŒŒìˆ˜ ì¡°ì‘ ë„êµ¬

### ğŸš€ ë‹¤ìŒ ë‹¨ê³„ ì¶”ì²œ

1. **AudioWorklet** í•™ìŠµ - ì»¤ìŠ¤í…€ ì˜¤ë””ì˜¤ í”„ë¡œì„¸ì„œ ê°œë°œ
2. **3D Audio** - ê³µê°„ ì˜¤ë””ì˜¤ ë° ë°”ì´ë…¸ëŸ´ ì²˜ë¦¬
3. **ì‹¤ì‹œê°„ ë¶„ì„** - FFTì™€ ê³ ê¸‰ ì‹ í˜¸ ë¶„ì„
4. **ì˜¤ë””ì˜¤ ì‹œê°í™”** - Canvas/WebGLì„ ì´ìš©í•œ ì‹¤ì‹œê°„ ì‹œê°í™”
5. **MIDI ì—°ë™** - Web MIDI APIì™€ì˜ ì¡°í•©

### ğŸ’¡ ì‹¤ì „ ì ìš© íŒ

- í•­ìƒ ì‚¬ìš©ì ìƒí˜¸ì‘ìš© í›„ì— AudioContext ìƒì„±
- ë©”ëª¨ë¦¬ ê´€ë¦¬ë¥¼ ìœ„í•´ ì‚¬ìš© í›„ disconnect() í˜¸ì¶œ
- ë¶€ë“œëŸ¬ìš´ íŒŒë¼ë¯¸í„° ë³€í™”ë¡œ í´ë¦­ìŒ ë°©ì§€
- ì ì ˆí•œ ë³¼ë¥¨ ë ˆë²¨ ìœ ì§€ë¡œ ì™œê³¡ ë°©ì§€
